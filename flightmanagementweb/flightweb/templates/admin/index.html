{% extends 'admin/master.html' %}

{% block body %}
{% if current_user.is_authenticated %}
<h1 class="text-info">CHÀO MỪNG BẠN ĐẾN TRANG QUẢN TRỊ!</h1>
<h2 class="text-success">Chào mừng bạn <span>{{current_user.name}} đã quay lại!</span></h2>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    body {
        font-family: Arial, sans-serif;
    }
    .container {
        width: 80%;
        margin: auto;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
    }
    th {
        background-color: #f2f2f2;
    }
</style>

<h1 class="text-center">Báo cáo doanh thu theo tháng</h1>
<div class="row">
    <div class="col-md-7 col-12">
        <div>
        <label for="monthSelect">Chọn tháng:</label>
        <select id="monthSelect" onchange="updateReport()">
            <!-- Các tùy chọn tháng sẽ được thêm vào đây bằng JavaScript -->
        </select>
    </div>
    <table id="reportTable">
        <thead>
        <tr>
            <th>STT</th>
            <th>Tuyến bay</th>
            <th>Doanh thu</th>
            <th>Số lượt bay</th>
            <th>Tỷ lệ</th>
        </tr>
        </thead>
        <tbody>
        <!-- Dữ liệu báo cáo sẽ được thêm vào đây bằng JavaScript -->
        </tbody>
        <tfoot>
        <tr>
            <td colspan="2">Tổng doanh thu:</td>
            <td id="totalRevenue" colspan="3"></td>
        </tr>
        </tfoot>
    </table>
    </div>
    <div class="col-md-5 col-12">
        <canvas id="revenueChart"></canvas>
    </div>
</div>

<div>
    <canvas id="myChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    const ctx = document.getElementById('myChart');

    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [{
          label: '# of Votes',
          data: [12, 19, 3, 5, 2, 3],
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
</script>

{% else %}
<h1 class="text-center text-info mt-1">ĐĂNG NHẬP NGƯỜI DÙNG</h1>
<form method="post" action="/admin-login">
    <div class="form-group mb-3 mt-3">
        <label for="username">Tên đăng nhập</label>
        <input type="text" class="form-control" id="username" placeholder="Tên đăng nhập" name="username"
               pattern="[a-zA-Z0-9]*" required>
    </div>

    <div class="form-group mt-3 mb-3">
        <label for="password">Mật khẩu</label>
        <input type="password" class="form-control" id="password" placeholder="Mật khẩu" name="password" required>
    </div>

    <div class="form-floating mt-3 mb-3">
        <button class="btn btn-success" type="submit">Đăng nhập</button>
    </div>
</form>
{% endif %}
{% endblock %}
